System.register("chunks:///_virtual/boss.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resMgr.ts","./gameManager.ts","./player.ts","./bossBullet.ts"],(function(e){var i,t,n,l,s,o,r,a,u,h,d,c,v,f,p,g,_,b,L,P,w,y;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,l=e.assertThisInitialized,s=e.createForOfIteratorHelperLoose,o=e.createClass},function(e){r=e.cclegacy,a=e._decorator,u=e.Vec3,h=e.Node,d=e.SpriteFrame,c=e.director,v=e.Sprite,f=e.UITransform,p=e.Color,g=e.tween,_=e.instantiate,b=e.Component},function(e){L=e.resMgr},function(e){P=e.gameManager},function(e){w=e.player},function(e){y=e.bossBullet}],execute:function(){var D,m,S,M,x,F,C,V,I,B,T,A,z,R,O,X,W,k,N,H,E,J,j,G,U,q,K;r._RF.push({},"d4b696WJdRJ+aLev7iirxVs","boss",void 0);var Q=a.ccclass,Y=a.property,Z=1e3,$=120,ee=new u(-280,300,0),ie=new u(280,300,0),te=new u(-280,300,0),ne=new u(280,300,0);e("boss",(D=Q("boss"),m=Y({tooltip:"Boss 血量"}),S=Y({type:h,tooltip:"受击判定盒，击中 box1 或 box4 时 Boss 扣血"}),M=Y(h),x=Y(h),F=Y({type:h,tooltip:"受击判定盒，击中 box1 或 box4 时 Boss 扣血"}),C=Y(h),V=Y(h),I=Y(d),B=Y(d),T=Y({tooltip:"待机动画切换间隔（秒）"}),A=Y({type:[d],tooltip:"死亡动画帧"}),z=Y({tooltip:"死亡动画每帧时长（秒）"}),D((X=i((O=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return i=e.call.apply(e,[this].concat(s))||this,n(i,"hp",X,l(i)),n(i,"box1",W,l(i)),n(i,"box2",k,l(i)),n(i,"box3",N,l(i)),n(i,"box4",H,l(i)),n(i,"box5",E,l(i)),n(i,"box6",J,l(i)),n(i,"boss_n1",j,l(i)),n(i,"boss_n2",G,l(i)),n(i,"idleFrameInterval",U,l(i)),n(i,"deathFrames",q,l(i)),n(i,"deathFrameInterval",K,l(i)),i._idleSprite=null,i._idleFlip=!1,i._isDead=!1,i._bulletPrefab=null,i._level2MovingToRight=!1,i._level2MovingToLeft=!1,i._level2LastFireX=0,i._level2SwingStopped=!1,i._level3MovingToLeft=!1,i._level3MovingToRight=!1,i._level3LastFireX=0,i._level3SwingStopped=!1,i}t(i,e);var r=i.prototype;return r.pauseAll=function(){c.getScheduler().pauseTarget(this),c.getScheduler().pauseTarget(this.node)},r.resumeAll=function(){c.getScheduler().resumeTarget(this.node),c.getScheduler().resumeTarget(this)},r.onLoad=function(){this._idleSprite=this.node.getComponent(v)||this.node.getComponentInChildren(v)},r.start=function(){var e,i,t;this._idleSprite&&this.boss_n1&&this.boss_n2&&(this._idleSprite.spriteFrame=this.boss_n1,this.schedule(this.tickIdleAnimation,this.idleFrameInterval,1/0)),this._bulletPrefab=null==(e=L.Instance)?void 0:e.getAsset("prefabs","bossBullet");var n=null!=(i=null==(t=P.Instance)?void 0:t.currentLevel)?i:1;3===n?this.runLevel3Cycle():2===n?this.runLevel2Cycle():this._bulletPrefab&&this.runLevel1Cycle()},r.update=function(e){var i;if(!this._isDead&&!P.isPaused&&(this.checkPlayerBulletHit(),null!=(i=this.node)&&i.isValid)){var t=this.node.worldPosition.x;if(this._level2MovingToRight&&t-this._level2LastFireX>=120){var n=new u;this.node.getWorldPosition(n),this.fireOneBulletDown(n),this._level2LastFireX=t}else if(this._level2MovingToLeft&&this._level2LastFireX-t>=120){var l=new u;this.node.getWorldPosition(l),this.fireOneBulletDown(l),this._level2LastFireX=t}if(this._level3MovingToRight&&t-this._level3LastFireX>=120){var s=new u;this.node.getWorldPosition(s),this.fireBulletsInCircle(s),this._level3LastFireX=t}else if(this._level3MovingToLeft&&this._level3LastFireX-t>=120){var o=new u;this.node.getWorldPosition(o),this.fireBulletsInCircle(o),this._level3LastFireX=t}}},r.tickIdleAnimation=function(){!P.isPaused&&this._idleSprite&&this.boss_n1&&this.boss_n2&&(this._idleFlip=!this._idleFlip,this._idleSprite.spriteFrame=this._idleFlip?this.boss_n2:this.boss_n1)},r.getNodeWorldRect=function(e){if(null==e||!e.isValid)return null;var i=e.getComponent(f)||e.getComponentInChildren(f);if(!i)return null;var t=i.node.worldPosition,n=i.contentSize.width,l=i.contentSize.height,s=i.anchorPoint.x,o=i.anchorPoint.y,r=t.x-n*s,a=t.y-l*o;return{left:r,right:r+n,bottom:a,top:a+l}},r.rectsIntersect=function(e,i){return!(e.right<i.left||e.left>i.right||e.top<i.bottom||e.bottom>i.top)},r.checkPlayerBulletHit=function(){if(!this._isDead){var e=P.Instance;if(e&&e.playerNode){var i=e.playerNode.getComponent(w);if(null==i||!i.isDead){var t=e.playerBulletNodes;if(null!=t&&Array.isArray(t)&&0!==t.length){for(var n=[this.box1,this.box2,this.box3,this.box4,this.box5,this.box6].filter(Boolean),l=[],o=0;o<t.length;o++){var r=t[o];if(null!=r&&r.isValid){var a=this.getNodeWorldRect(r);if(a)for(var u,h=s(n);!(u=h()).done;){var d=u.value;if(null!=d&&d.isValid){var c=this.getNodeWorldRect(d);if(c&&this.rectsIntersect(a,c)){l.indexOf(r)<0&&l.push(r),d!==this.box1&&d!==this.box4||this.takeDamage(1);break}}}}}for(var v=0,f=l;v<f.length;v++){var p=f[v],g=t.indexOf(p);g>=0&&t.splice(g,1),console.log("boss checkPlayerBulletHit destroy bullet",p),null!=p&&p.isValid&&p.destroy()}}}}}},r.takeDamage=function(e){var i;void 0===e&&(e=1),this._isDead||(null==(i=P.Instance)||i.playBossHitEffect(),this.hp-=e,this.playHitFlash(),this.hp<=0&&this.enterDeath())},r.playHitFlash=function(){var e=this.node.getComponentsInChildren(v),i=null!=e&&Array.isArray(e)?e.slice(0):[];if(0!==i.length)for(var t,n=new p(255,80,80,255),l=new p(255,255,255,255),o=s(i);!(t=o()).done;){var r=t.value;g(r).to(.08,{color:n}).to(.08,{color:l}).start()}},r.enterDeath=function(){var e,i;if(!this._isDead){this._isDead=!0,null==(e=P.Instance)||e.playBossDeathEffect(),this.unschedule(this.tickIdleAnimation),this.unschedule(this.runLevel1Cycle),this.unschedule(this.runLevel2Cycle),this.unschedule(this.runLevel2Phase2),this.unschedule(this.runLevel2Phase3),this.unschedule(this.runLevel3Cycle),this.unschedule(this.runLevel3Phase3),this._level2SwingStopped=!0,this._level2MovingToRight=!1,this._level2MovingToLeft=!1,this._level3MovingToRight=!1,this._level3MovingToLeft=!1,this._level3SwingStopped=!0;var t=null==(i=P.Instance)||null==(i=i.playerNode)?void 0:i.getComponent(w);t&&t.stopFiring(),this.playDeathFrameAnimation()}},r.destroySelf=function(){var e,i=P.Instance;i&&(i.scheduleShowGameSuccess(1),i.clearBossNodeRef()),null!=(e=this.node)&&e.isValid&&this.node.destroy()},r.playDeathFrameAnimation=function(){var e=this,i=this.deathFrames,t=null!=i&&Array.isArray(i)?i.slice(0):[],n=t.length;if(0!==n){var l=0;!function i(){if(e.isValid&&e._idleSprite)if(l>=n)e.destroySelf();else{var s=t[l];s&&(e._idleSprite.spriteFrame=s),l++,e.scheduleOnce((function(){return i()}),e.deathFrameInterval)}}()}else this.destroySelf()},r.runLevel1Cycle=function(){var e,i=this;if(!P.isPaused&&!this._isDead&&null!=(e=this.node)&&e.isValid&&this._bulletPrefab){var t=P.Instance;if(t){var n=new u;this.node.getWorldPosition(n);var l=t.playerNode;if(null!=l&&l.isValid){var s=new u;l.getWorldPosition(s),this.fireBullet(n,s)}this.scheduleOnce((function(){var e;if(!P.isPaused&&!i._isDead&&null!=(e=i.node)&&e.isValid){var t=i.node.eulerAngles.z;g(i.node).to(1.2,{eulerAngles:new u(0,0,t+180)}).call((function(){var e;if(!P.isPaused&&!i._isDead&&null!=(e=i.node)&&e.isValid){var t=new u;i.node.getWorldPosition(t),i.fireThreeBulletsDown(t),i.scheduleOnce((function(){var e;if(!P.isPaused&&!i._isDead&&null!=(e=i.node)&&e.isValid){var t=i.node.eulerAngles.z;g(i.node).to(1.2,{eulerAngles:new u(0,0,t+180)}).call((function(){return i.runLevel1Cycle()})).start()}}),3)}})).start()}}),3)}}},r.fireBullet=function(e,i){if(this._bulletPrefab&&P.Instance){var t=_(this._bulletPrefab),n=t.getComponent(y);n?(t.parent=P.Instance.getBossBulletLayer(),n.setup(0,e,i,400),P.Instance.bossBulletNodes.push(t)):t.destroy()}},r.fireThreeBulletsDown=function(e){if(this._bulletPrefab&&P.Instance)for(var i=30*Math.PI/180,t=0,n=[new u(-Math.sin(i),-Math.cos(i),0),new u(0,-1,0),new u(Math.sin(i),-Math.cos(i),0)];t<n.length;t++){var l=n[t],s=new u(e.x+1e3*l.x,e.y+1e3*l.y,0);this.fireBullet(e.clone(),s)}},r.fireOneBulletDown=function(e){if(this._bulletPrefab&&P.Instance){var i=new u(e.x,e.y-Z,0);this.fireBullet(e.clone(),i)}},r.fireBulletsInCircle=function(e,i){if(void 0===i&&(i=25),this._bulletPrefab&&P.Instance)for(var t=0;t<360;t+=i){var n=t*Math.PI/180,l=Math.cos(n),s=Math.sin(n),o=new u(e.x+1e3*l,e.y+1e3*s,0);this.fireBullet(e.clone(),o)}},r.runLevel2Cycle=function(){var e;!P.isPaused&&!this._isDead&&null!=(e=this.node)&&e.isValid&&this._bulletPrefab&&(this.hp>300?this.runLevel2Phase1():this.hp>200?this.runLevel2Phase2():this.runLevel2Phase3())},r.runLevel2Phase1=function(){var e,i=this;if(!P.isPaused&&!this._isDead&&null!=(e=this.node)&&e.isValid){var t=200*(2*Math.random()-1),n=$+130*Math.random(),l=new u(t,n,this.node.position.z);g(this.node).to(1.2,{position:l}).call((function(){var e;if(!P.isPaused&&!i._isDead&&null!=(e=i.node)&&e.isValid){var t=new u;i.node.getWorldPosition(t),i.fireThreeBulletsDown(t),i.scheduleOnce((function(){var e;if(!P.isPaused&&!i._isDead&&null!=(e=i.node)&&e.isValid){var t=i.node.eulerAngles.z;g(i.node).to(.8,{eulerAngles:new u(0,0,t+90)}).call((function(){return i.runLevel2Cycle()})).start()}}),3)}})).start()}},r.runLevel2Phase2=function(){var e,i=this;P.isPaused||this._isDead||null==(e=this.node)||!e.isValid||g(this.node).to(.8,{eulerAngles:new u(0,0,0)}).call((function(){return i.runLevel2SideMoveCycle((function(){return i.runLevel2Cycle()}))})).start()},r.runLevel2Phase3=function(){var e,i=this;if(!P.isPaused&&!this._isDead&&null!=(e=this.node)&&e.isValid){this._level2SwingStopped=!1,this.runLevel2SwingLoop();var t=this.getLevel2Phase3MoveDuration();this.runLevel2SideMoveCycle((function(){return i.runLevel2Phase3()}),t)}},r.getLevel2Phase3SwingDuration=function(){return.2+Math.max(0,this.hp)/200*(.8-.2)},r.getLevel2Phase3MoveDuration=function(){return 2+2*(Math.max(0,this.hp)/200)},r.runLevel2SwingLoop=function(){var e,i=this;if(!this._level2SwingStopped&&!this._isDead&&null!=(e=this.node)&&e.isValid){var t=this.getLevel2Phase3SwingDuration();g(this.node).to(t,{eulerAngles:new u(0,0,-20)}).call((function(){var e;if(!i._level2SwingStopped&&!i._isDead&&null!=(e=i.node)&&e.isValid){var t=i.getLevel2Phase3SwingDuration();g(i.node).to(t,{eulerAngles:new u(0,0,20)}).call((function(){return i.runLevel2SwingLoop()})).start()}})).start()}},r.runLevel2SideMoveCycle=function(e,i){var t,n=this;if(void 0===i&&(i=4),!P.isPaused&&!this._isDead&&null!=(t=this.node)&&t.isValid){var l=this.node.position.z,s=new u(ee.x,ee.y,l),o=new u(ie.x,ie.y,l);this._level2MovingToLeft=!0,this._level2LastFireX=this.node.worldPosition.x,g(this.node).to(i,{position:s}).call((function(){var t;n._level2MovingToLeft=!1,P.isPaused||n._isDead||null==(t=n.node)||!t.isValid||n.scheduleOnce((function(){var t;P.isPaused||n._isDead||null==(t=n.node)||!t.isValid||(n._level2MovingToRight=!0,n._level2LastFireX=n.node.worldPosition.x,g(n.node).to(i,{position:o}).call((function(){var i;n._level2MovingToRight=!1,P.isPaused||n._isDead||null==(i=n.node)||!i.isValid||n.scheduleOnce(e,2)})).start())}),2)})).start()}},r.runLevel3Cycle=function(){var e;!P.isPaused&&!this._isDead&&null!=(e=this.node)&&e.isValid&&this._bulletPrefab&&(this.hp>400?this.runLevel3Phase1():this.hp>200?this.runLevel3Phase2():this.runLevel3Phase3())},r.runLevel3Phase1=function(){var e,i=this;if(!P.isPaused&&!this._isDead&&null!=(e=this.node)&&e.isValid){var t=200*(2*Math.random()-1),n=$+130*Math.random(),l=new u(t,n,this.node.position.z);g(this.node).to(1.2,{position:l}).call((function(){var e;if(!P.isPaused&&!i._isDead&&null!=(e=i.node)&&e.isValid){var t=new u;i.node.getWorldPosition(t),i.fireBulletsInCircle(t),i.scheduleOnce((function(){var e;if(!P.isPaused&&!i._isDead&&null!=(e=i.node)&&e.isValid){var t=i.node.eulerAngles.z;g(i.node).to(1.2,{eulerAngles:new u(0,0,t+180)}).call((function(){return i.runLevel3Cycle()})).start()}}),3)}})).start()}},r.runLevel3Phase2=function(){var e,i=this;P.isPaused||this._isDead||null==(e=this.node)||!e.isValid||this.runLevel3SideMoveCycle((function(){return i.runLevel3Cycle()}))},r.runLevel3Phase3=function(){var e,i=this;if(!P.isPaused&&!this._isDead&&null!=(e=this.node)&&e.isValid){this._level3SwingStopped=!1,this.runLevel3SwingLoop();var t=this.getLevel3Phase3MoveDuration();this.runLevel3SideMoveCycle((function(){return i.runLevel3Phase3()}),t)}},r.getLevel3Phase3SwingDuration=function(){return.1+Math.max(0,this.hp)/200*(.8-.1)},r.getLevel3Phase3MoveDuration=function(){return 2+2*(Math.max(0,this.hp)/200)},r.runLevel3SwingLoop=function(){var e,i=this;if(!this._level3SwingStopped&&!this._isDead&&null!=(e=this.node)&&e.isValid){var t=this.getLevel3Phase3SwingDuration();g(this.node).to(t,{eulerAngles:new u(0,0,-20)}).call((function(){var e;if(!i._level3SwingStopped&&!i._isDead&&null!=(e=i.node)&&e.isValid){var t=i.getLevel3Phase3SwingDuration();g(i.node).to(t,{eulerAngles:new u(0,0,20)}).call((function(){return i.runLevel3SwingLoop()})).start()}})).start()}},r.runLevel3SideMoveCycle=function(e,i){var t,n=this;if(void 0===i&&(i=4),!P.isPaused&&!this._isDead&&null!=(t=this.node)&&t.isValid){var l=this.node.position.z,s=new u(te.x,te.y,l),o=new u(ne.x,ne.y,l);this._level3MovingToLeft=!0,this._level3LastFireX=this.node.worldPosition.x,g(this.node).to(i,{position:s}).call((function(){var t;n._level3MovingToLeft=!1,P.isPaused||n._isDead||null==(t=n.node)||!t.isValid||n.scheduleOnce((function(){var t;P.isPaused||n._isDead||null==(t=n.node)||!t.isValid||(n._level3MovingToRight=!0,n._level3LastFireX=n.node.worldPosition.x,g(n.node).to(i,{position:o}).call((function(){var i;n._level3MovingToRight=!1,P.isPaused||n._isDead||null==(i=n.node)||!i.isValid||n.scheduleOnce(e,2)})).start())}),2)})).start()}},o(i,[{key:"isDead",get:function(){return this._isDead}}]),i}(b)).prototype,"hp",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),W=i(O.prototype,"box1",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(O.prototype,"box2",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(O.prototype,"box3",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(O.prototype,"box4",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(O.prototype,"box5",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(O.prototype,"box6",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(O.prototype,"boss_n1",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(O.prototype,"boss_n2",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(O.prototype,"idleFrameInterval",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),q=i(O.prototype,"deathFrames",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=i(O.prototype,"deathFrameInterval",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.08}}),R=O))||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/bossBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager.ts"],(function(t){var e,s,n,o,i,r,a,u,c,l;return{setters:[function(t){e=t.inheritsLoose,s=t.createClass},function(t){n=t.cclegacy,o=t._decorator,i=t.director,r=t.Camera,a=t.view,u=t.Vec3,c=t.Component},function(t){l=t.gameManager}],execute:function(){var h;n._RF.push({},"5268emwh4ZKJ43YVi27NQue","bossBullet",void 0);var d=o.ccclass,g=(o.property,t("BulletType",function(t){return t[t.Normal=0]="Normal",t[t.Strong=1]="Strong",t[t.Laser=2]="Laser",t}({})));t("bossBullet",d("bossBullet")(h=function(t){function n(){for(var e,s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this)._type=g.Normal,e._startPos=new u,e._targetPos=new u,e._speed=500,e._isMoving=!1,e._camera=null,e}e(n,t);var o=n.prototype;return o.onLoad=function(){var t,e;this._camera=null!=(t=null==(e=i.getScene())?void 0:e.getComponentInChildren(r))?t:null},o.onDestroy=function(){var t;if((null==(t=l.Instance)?void 0:t.bossBulletNodes.indexOf(this.node))>=0){var e=l.Instance.bossBulletNodes.indexOf(this.node);e>=0&&l.Instance.bossBulletNodes.splice(e,1)}},o.isOutOfScreen=function(){if(!this._camera)return!1;var t=a.getVisibleSize(),e=300,s=new u;this.node.getWorldPosition(s);var n=new u,o=new u;return this._camera.screenToWorld(new u(-e,-e,0),n),this._camera.screenToWorld(new u(t.width+e,t.height+e,0),o),s.x<n.x||s.x>o.x||s.y<n.y||s.y>o.y},o.setType=function(t){return this._type=t,this},o.setStart=function(t){return this._startPos.set(t),this.node.setWorldPosition(this._startPos),this},o.setTarget=function(t){return this._targetPos.set(t),this},o.setSpeed=function(t){return this._speed=Math.max(0,t),this},o.setup=function(t,e,s,n){return this.setType(t).setStart(e).setTarget(s).setSpeed(n),this._isMoving=!0,this},o.startMove=function(){this._isMoving=!0},o.stopMove=function(){this._isMoving=!1},o.update=function(t){if(this._isMoving&&!l.isPaused){var e=new u;this.node.getWorldPosition(e);var s=new u;u.subtract(s,this._targetPos,e);var n=s.length(),o=this._speed*t;if(o>=n)return this.node.setWorldPosition(this._targetPos),this._isMoving=!1,void this.onReachTarget();s.normalize();var i=new u;u.scaleAndAdd(i,e,s,o),this.node.setWorldPosition(i),this.isOutOfScreen()&&this.node.destroy()}},o.onReachTarget=function(){this.node.destroy()},s(n,[{key:"type",get:function(){return this._type}}]),n}(c))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager.ts"],(function(t){var e,n,i,s,r,o,a,u,l,h;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,s=t._decorator,r=t.director,o=t.Camera,a=t.view,u=t.Vec3,l=t.Component},function(t){h=t.gameManager}],execute:function(){var c;i._RF.push({},"9ec3biz7QdAI549ljVrSwMn","bullet",void 0);var d=s.ccclass,g=(s.property,t("BulletType",function(t){return t[t.Normal=0]="Normal",t[t.Strong=1]="Strong",t[t.Laser=2]="Laser",t}({})));t("bullet",d("bullet")(c=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._type=g.Normal,e._startPos=new u,e._targetPos=new u,e._trackTargetNode=null,e._speed=500,e._isMoving=!1,e._camera=null,e}e(i,t);var s=i.prototype;return s.onLoad=function(){var t,e;this._camera=null!=(t=null==(e=r.getScene())?void 0:e.getComponentInChildren(o))?t:null},s.onDestroy=function(){var t,e=null==(t=h.Instance)?void 0:t.playerBulletNodes;if(e){var n=e.indexOf(this.node);n>=0&&e.splice(n,1)}},s.isOutOfScreen=function(){if(!this._camera)return!1;var t=a.getVisibleSize(),e=250,n=new u;this.node.getWorldPosition(n);var i=new u,s=new u;return this._camera.screenToWorld(new u(-e,-e,0),i),this._camera.screenToWorld(new u(t.width+e,t.height+e,0),s),n.x<i.x||n.x>s.x||n.y<i.y||n.y>s.y},s.setType=function(t){return this._type=t,this},s.setStart=function(t){return this._startPos.set(t),this.node.setWorldPosition(this._startPos),this},s.setTarget=function(t){return this._targetPos.set(t),this},s.setSpeed=function(t){return this._speed=Math.max(0,t),this},s.setup=function(t,e,n,i){return this._trackTargetNode=null,this.setType(t).setStart(e).setTarget(n).setSpeed(i),this._updateHeading(),this._isMoving=!0,this},s.setupTrackTarget=function(t,e,n,i){return this.setType(t).setStart(e).setSpeed(i),this._trackTargetNode=n,null!=n&&n.isValid&&n.getWorldPosition(this._targetPos),this._updateHeading(),this._isMoving=!0,this},s._updateHeading=function(){var t=new u;if(u.subtract(t,this._targetPos,this.node.worldPosition),t.lengthSqr()>1e-6){t.normalize();var e=Math.atan2(t.y,t.x)*(180/Math.PI)-90;this.node.eulerAngles=new u(0,0,e)}},s.startMove=function(){this._isMoving=!0},s.stopMove=function(){this._isMoving=!1},s.update=function(t){var e;if(this._isMoving&&!h.isPaused){null!=(e=this._trackTargetNode)&&e.isValid&&(this._trackTargetNode.getWorldPosition(this._targetPos),this._updateHeading());var n=new u;this.node.getWorldPosition(n);var i=new u;u.subtract(i,this._targetPos,n);var s=i.length(),r=this._speed*t;if(r>=s)return this.node.setWorldPosition(this._targetPos),this._isMoving=!1,void this.onReachTarget();i.normalize();var o=new u;u.scaleAndAdd(o,n,i,r),this.node.setWorldPosition(o),this.isOutOfScreen()&&this.node.destroy()}},s.onReachTarget=function(){this.node.destroy()},n(i,[{key:"type",get:function(){return this._type}}]),i}(l))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/flameAnim.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,o,a,l,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Vec3,c=e.Sprite,s=e.Component}],execute:function(){var p,u,f,h,m,b,y,_,d,g,v;o._RF.push({},"1bec9xpedNBo7Fdc6kvlput","flameAnim",void 0);var A=a.ccclass,S=a.property;e("flameAnim",(p=A("flameAnim"),u=S({tooltip:"纵向缩放幅度（相对基础缩放）"}),f=S({tooltip:"闪烁速度（越大越快）"}),h=S({tooltip:"是否同时闪烁透明度"}),m=S({tooltip:"透明度变化范围 [min, max]，如 [0.75, 1]"}),p((_=t((y=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"scaleAmount",_,r(t)),n(t,"speed",d,r(t)),n(t,"flickerOpacity",g,r(t)),n(t,"opacityRange",v,r(t)),t._baseScale=new l(1,1,1),t._time=0,t._sprite=null,t}i(t,e);var o=t.prototype;return o.onLoad=function(){this._baseScale.set(this.node.scale),this._sprite=this.node.getComponent(c)},o.update=function(e){this._time+=e*this.speed;var t=.5*Math.sin(this._time)+.5,i=1+this.scaleAmount*(2*t-1);if(this.node.setScale(this._baseScale.x,this._baseScale.y*i,this._baseScale.z),this.flickerOpacity&&this._sprite){var n=this.opacityRange,r=n[0],o=n[1],a=Math.floor(255*(r+(o-r)*t)),l=this._sprite.color.clone();l.a=a,this._sprite.color=l}},t}(s)).prototype,"scaleAmount",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.25}}),d=t(y.prototype,"speed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 18}}),g=t(y.prototype,"flickerOpacity",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=t(y.prototype,"opacityRange",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[.75,1]}}),b=y))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/gameFail.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameSucees.ts","./resShiCi.ts","./gameManager.ts"],(function(e){var t,n,i,o,a,c,r,s,l;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.Label,a=e.director,c=e.Component},function(e){r=e.GAME_SUCCESS_EVENT},function(e){s=e.default},function(e){l=e.gameManager}],execute:function(){var u;n._RF.push({},"74c416M6aVCPZO8qiRMyGdA","gameFail",void 0);var g=i.ccclass;i.property,e("gameFail",g("gameFail")(u=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var i=n.prototype;return i.start=function(){},i.onEnable=function(){var e=s.getRandomShiCi();this.node.getChildByName("shici_text").getComponent(o).string=e,console.log(e)},i.onBtnClick=function(e,t){var n,i;if(null==(n=l.Instance)||n.playClickEffect(),"backHomeBtn"==t)this.node.destroy(),null==(i=a.getScene())||i.emit(r.FAIL_BACKHOME);else if("resetGame"==t){var o;this.node.destroy(),null==(o=a.getScene())||o.emit(r.FAIL_RESETGAME)}},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/gameLaunch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resMgr.ts","./gameLoadingNode.ts"],(function(n){var t,e,o,a,c,s;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,a=n.Component},function(n){c=n.resMgr},function(n){s=n.gameLoadingNode}],execute:function(){var r,u;e._RF.push({},"bf62b+YPPFGF6jyuzl53Bpg","gameLaunch",void 0);var i=o.ccclass;o.property,n("gameLaunch",i("gameLaunch")(((u=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var o=e.prototype;return o.onLoad=function(){null===e.Instance?(console.log("初始化gameLaunch单列!"),e.Instance=this,this.node.addComponent(c)):this.destroy()},o.start=function(){s.Instance.startLoad()},e}(a)).Instance=null,r=u))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/gameLoadingNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resMgr.ts","./tools.ts"],(function(n){var e,t,o,a,i,s,l,r,c,d;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,a=n.Sprite,i=n.Label,s=n.tween,l=n.instantiate,r=n.Component},function(n){c=n.resMgr},function(n){d=n.default}],execute:function(){var g,u;t._RF.push({},"84cb6/AZdZBoocaHML087c7","gameLoadingNode",void 0);var h=o.ccclass;o.property,n("gameLoadingNode",h("gameLoadingNode")(((u=function(n){function t(){for(var e,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))||this).loadingSprite=null,e.loadingLabel=null,e}e(t,n);var o=t.prototype;return o.onLoad=function(){null===t.Instance?(console.log("初始化gameLoadingNode单列!"),t.Instance=this):this.destroy()},o.start=function(){},o.startLoad=function(){var n=this;this.loadingSprite=this.node.getChildByName("loading1").getComponent(a),this.loadingLabel=this.node.getChildByName("loadingStr").getComponent(i),this.loadingSprite.fillRange=0,this.loadingLabel.string="资源加载:开始加载",c.Instance.preLoadResPkg(d.resPkg,this.loadingResCallBack,(function(){s(n.node).delay(.3).call((function(){t.Instance.enterStartScene()})).start()}))},o.loadingResCallBack=function(n,e){t.Instance.loadingLabel.string="资源加载:"+n+"/"+e,t.Instance.loadingSprite.fillRange=n/e},o.enterStartScene=function(){this.hideLoadingNode();var n=c.Instance.getAsset("prefabs","gameLobbyNode");l(n).parent=this.node.parent},o.hideLoadingNode=function(){this.node.active=!1},t}(r)).Instance=null,g=u))||g);t._RF.pop()}}}));

System.register("chunks:///_virtual/gameLobbyNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resMgr.ts","./gameSucees.ts","./gameManager.ts","./gameSetting.ts"],(function(t){var n,e,a,o,i,r,s,l,u,c,d,g,h,f,b,p,S,y,B;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,r=t._decorator,s=t.Label,l=t.Node,u=t.AudioClip,c=t.director,d=t.AudioSource,g=t.instantiate,h=t.tween,f=t.Vec3,b=t.Component},function(t){p=t.resMgr},function(t){S=t.GAME_SUCCESS_EVENT},function(t){y=t.gameManager},function(t){B=t.gameSetting}],execute:function(){var _,m,v,L,k,M,x,I,A,N,O,C,T,z,w,E;i._RF.push({},"791d4NW1O1GxIDjm2aT5Rng","gameLobbyNode",void 0);var P=r.ccclass,V=r.property;t("gameLobbyNode",(_=P("gameLobbyNode"),m=V(s),v=V(l),L=V(l),k=V(u),M=V(u),x=V(u),_(((E=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(n=t.call.apply(t,[this].concat(i))||this).gameManagerPrefab=null,n.gameManagerNode=null,a(n,"level_text",N,o(n)),a(n,"startBtn",O,o(n)),a(n,"rankBtn",C,o(n)),a(n,"loadSound",T,o(n)),a(n,"startBtnSound",z,o(n)),a(n,"clickSound",w,o(n)),n._audioSource=null,n}e(n,t);var i=n.prototype;return i.onLoad=function(){var t,e;null===n.Instance?(console.log("初始化gameLobbyNode单列!"),n.Instance=this,null==(t=c.getScene())||t.on(S.BACK_TO_LOBBY,this._onBackToLobby,this),null==(e=c.getScene())||e.on(S.FAIL_BACKHOME,this._onBackToLobby,this),this._audioSource=this.node.getComponent(d)||this.node.addComponent(d)):this.destroy()},i.onDestroy=function(){var t,n;null==(t=c.getScene())||t.off(S.BACK_TO_LOBBY,this._onBackToLobby,this),null==(n=c.getScene())||n.off(S.FAIL_BACKHOME,this._onBackToLobby,this)},i._refreshMaxLevelText=function(){var t=y.getMaxLevel();this.level_text&&(this.level_text.string="最高记录: "+String(t))},i._onBackToLobby=function(){this.node.active=!0,this.gameManagerNode.active=!1,this._refreshMaxLevelText()},i.start=function(){this._refreshMaxLevelText(),this._playLoadSound(),this.gameManagerPrefab=p.Instance.getAsset("prefabs","gameManager"),this.gameManagerNode=g(this.gameManagerPrefab),this.gameManagerNode.parent=this.node.parent,this.gameManagerNode.active=!1,this._playFirstLoadButtonBounce()},i._playLoadSound=function(){if(B.soundEnabled&&this._audioSource){var t=this.loadSound;!t&&p.Instance&&(t=p.Instance.getAsset("sound","gameStart")),t&&this._audioSource.playOneShot(t)}},i._playFirstLoadButtonBounce=function(){var t,n,e=this;if(null!=(t=this.startBtn)&&t.isValid&&null!=(n=this.rankBtn)&&n.isValid){var a=this.startBtn.position.clone(),o=this.rankBtn.position.clone();this.startBtn.setPosition(a.x-800,a.y,a.z),this.rankBtn.setPosition(o.x+800,o.y,o.z),this.scheduleOnce((function(){var t,n;null!=(t=e.startBtn)&&t.isValid&&null!=(n=e.rankBtn)&&n.isValid&&(h(e.startBtn).to(.5,{position:new f(a.x,a.y,a.z)},{easing:"backOut"}).start(),h(e.rankBtn).to(.5,{position:new f(o.x,o.y,o.z)},{easing:"backOut"}).start())}),1.5)}},i._playStartBtnSound=function(){if(B.soundEnabled&&this._audioSource){var t=this.startBtnSound||this.clickSound;!t&&p.Instance&&(t=p.Instance.getAsset("sound","gameStart")),!t&&p.Instance&&(t=p.Instance.getAsset("sound","click")),t&&this._audioSource.playOneShot(t)}},i._playClickSound=function(){if(B.soundEnabled&&this._audioSource){var t=this.clickSound;!t&&p.Instance&&(t=p.Instance.getAsset("sound","click")),t&&this._audioSource.playOneShot(t)}},i.onBtnClick=function(t,n){var e=this;if("startBtn"==n){if(this._playStartBtnSound(),!this.gameManagerPrefab)return;console.log("开始游戏"),this.scheduleOnce((function(){var t;null!=(t=e.node)&&t.isValid&&(e.node.active=!1,e.gameManagerNode.active=!0,y.Instance.reloadGame())}),.5)}else"rankBtn"==n&&(this._playClickSound(),console.log("显示排行榜"))},n}(b)).Instance=null,N=n((A=E).prototype,"level_text",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(A.prototype,"startBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(A.prototype,"rankBtn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(A.prototype,"loadSound",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(A.prototype,"startBtnSound",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(A.prototype,"clickSound",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=A))||I));i._RF.pop()}}}));

System.register("chunks:///_virtual/gameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resMgr.ts","./player.ts","./moveControl.ts","./boss.ts","./gameSucees.ts","./gameSetting.ts"],(function(e){var t,s,n,l,a,i,o,r,u,h,c,d,g,f,p,b,m,y,v,S,_,B,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.inheritsLoose,n=e.initializerDefineProperty,l=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose,i=e.createClass},function(e){o=e.cclegacy,r=e._decorator,u=e.Label,h=e.Node,c=e.AudioClip,d=e.instantiate,g=e.director,f=e.AudioSource,p=e.Sprite,b=e.sys,m=e.Component},function(e){y=e.resMgr},function(e){v=e.player},function(e){S=e.moveControl},function(e){_=e.boss},function(e){B=e.GAME_SUCCESS_EVENT},function(e){L=e.gameSetting}],execute:function(){var N,P,C,I,A,x,F,G,E,M,w,D,H,T,V,k,z,O,R,j;o._RF.push({},"fea9dgH/apFCq7xFj8KIJr8","gameManager",void 0);var K=r.ccclass,W=r.property,q="fingerBattle_maxLevel";e("gameManager",(N=K("gameManager"),P=W(u),C=W(h),I=W(c),A=W(c),x=W(c),F=W(c),G=W(c),E=W(c),N(((j=function(e){function t(){for(var t,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,n(t,"levelText",D,l(t)),n(t,"jindu1",H,l(t)),n(t,"bgmClip",T,l(t)),n(t,"bulletFireSound",V,l(t)),n(t,"playerDeathSound",k,l(t)),n(t,"bossDeathSound",z,l(t)),n(t,"bossHitSound",O,l(t)),n(t,"clickSound",R,l(t)),t._bgmSource=null,t._effectSource=null,t.bossPrefab=null,t.playerPrefab=null,t.moveControlPrefab=null,t.gameFailPrefab=null,t.gameSettingPrefab=null,t.gameSuceesPrefab=null,t.bossNode=null,t.playerNode=null,t.moveControlNode=null,t.gameFailNode=null,t.gameSettingNode=null,t.gameSuceesNode=null,t.playerBulletNodes=[],t.bossBulletNodes=[],t._playerBulletLayer=null,t._bossBulletLayer=null,t._currentLevel=1,t._maxBossHp=100,t}s(t,e);var o=t.prototype;return o.getPlayerBulletLayer=function(){var e;if(null!=(e=this._playerBulletLayer)&&e.isValid){var t=this._playerBulletLayer.parent;t&&this._playerBulletLayer.getSiblingIndex()<t.children.length-1&&this._playerBulletLayer.setSiblingIndex(t.children.length-1)}else{this._playerBulletLayer=new h("PlayerBulletLayer"),this._playerBulletLayer.layer=this.node.layer;var s=this.node.parent||this.node;this._playerBulletLayer.parent=s,this._playerBulletLayer.setSiblingIndex(s.children.length-1)}return this._playerBulletLayer},o.getBossBulletLayer=function(){var e;if(null!=(e=this._bossBulletLayer)&&e.isValid){var t=this._bossBulletLayer.parent;t&&this._bossBulletLayer.getSiblingIndex()<t.children.length-1&&this._bossBulletLayer.setSiblingIndex(t.children.length-1)}else{this._bossBulletLayer=new h("BossBulletLayer"),this._bossBulletLayer.layer=this.node.layer;var s=this.node.parent||this.node;this._bossBulletLayer.parent=s,this._bossBulletLayer.setSiblingIndex(s.children.length-1)}return this._bossBulletLayer},o.clearBossNodeRef=function(){this.bossNode=null},o.setGamePaused=function(e){var s,n;t.isPaused=e;var l=null==(s=this.bossNode)?void 0:s.getComponent(_);l&&(e?l.pauseAll():l.resumeAll());var a=null==(n=this.playerNode)?void 0:n.getComponent(v);a&&(e?a.pauseAll():a.resumeAll())},o.scheduleShowGameSuccess=function(e){var t=this;void 0===e&&(e=1),this.scheduleOnce((function(){return t.showGameSuccess()}),e)},o.scheduleShowGameFail=function(e){var t=this;void 0===e&&(e=1),this.scheduleOnce((function(){return t.showGameFail()}),e)},o.showGameFail=function(){var e,t=d(this.gameFailPrefab);t.parent=this.node,t.setPosition(0,0,0),this.gameFailNode=t,this.setGamePaused(!0);var s=g.getScene();s&&(s.once(B.FAIL_RESETGAME,this._onResetGame,this),s.once(B.FAIL_BACKHOME,this._onFailBackToLobby,this)),null!=(e=this.gameSettingNode)&&e.isValid&&(this.gameSettingNode.destroy(),this.gameSettingNode=null)},o._onResetGame=function(){this.gameFailNode=null,this.setGamePaused(!1),this.reloadGame()},o.showGameSuccess=function(){var e,t=d(this.gameSuceesPrefab);t.parent=this.node,t.setPosition(0,0,0),this.setGamePaused(!0);var s=g.getScene();s&&(s.once(B.BACK_TO_LOBBY,this._onSucessBackToLobby,this),s.once(B.NEXT_LEVEL,this._onNextLevel,this)),null!=(e=this.gameSettingNode)&&e.isValid&&(this.gameSettingNode.destroy(),this.gameSettingNode=null)},o.clearSettingNode=function(){this.gameSettingNode=null},o._onSucessBackToLobby=function(){this.gameSuceesNode=null,this.updateLevel(this._currentLevel+1),this.setGamePaused(!1),this.clearGameData()},o._onFailBackToLobby=function(){this.gameFailNode=null,this.setGamePaused(!1),this.clearGameData()},o._onNextLevel=function(){this.setGamePaused(!1),this.updateLevel(this._currentLevel+1),this.reloadGame()},o.onLoad=function(){if(null!==t.Instance)return console.log("gameManager destroy"),void this.destroy();console.log("初始化gameManager单列!"),t.Instance=this,this._bgmSource=this.node.getComponent(f)||this.node.addComponent(f),this._effectSource=this.node.addComponent(f)},o.start=function(){console.log("gameManager start")},o.update=function(e){t.isPaused||this.refreshBossHpBar()},o.refreshLevelText=function(){this.levelText&&(this.levelText.string="第"+this._currentLevel+"关")},o.refreshBossHpBar=function(){var e,t;if(null!=(e=this.bossNode)&&e.isValid&&null!=(t=this.jindu1)&&t.isValid){var s=this.bossNode.getComponent(_);if(s){var n=this.jindu1.getComponent(p);if(n){var l=this._maxBossHp>0?this._maxBossHp:1,a=Math.max(0,Math.min(1,s.hp/l));n.fillRange=a}}}},t.getMaxLevel=function(){var e=b.localStorage.getItem(q);return Math.max(1,e?parseInt(e,10):1)},o.updateLevel=function(e){e>=1&&(this._currentLevel=e);var s=Math.max(e,t.getMaxLevel());b.localStorage.setItem(q,String(s)),this.refreshLevelText()},o.onBtnClick=function(e,t){if("settingBtn"==t){var s;if(null!=(s=this.gameSettingNode)&&s.isValid)return;this.playClickEffect(),console.log("创建设置面板"),this.gameSettingNode=d(this.gameSettingPrefab),this.gameSettingNode.parent=this.node,this.gameSettingNode.setPosition(0,0,0);var n=this.gameSettingNode.getComponent(L);n&&(n.musicSourceNode=this.node),this.setGamePaused(!0)}},o.createBoss=function(){if(null!=this.bossPrefab){var e=d(this.bossPrefab);e.parent=this.node,this.bossNode=e,this.bossNode.setPosition(0,350,0);var t=this.bossNode.getComponent(_);t&&(1===this._currentLevel?t.hp=100:2===this._currentLevel?t.hp=400:3===this._currentLevel&&(t.hp=500),this._maxBossHp=t.hp),this.refreshBossHpBar()}else console.error("bossPrefab is null")},o.createPlayer=function(){var e;if(null!=this.playerPrefab){var t=d(this.playerPrefab);t.parent=this.node,this.playerNode=t;var s=null==(e=this.moveControlNode)?void 0:e.getComponent(S);null==s||s.getCenterWorld();this.playerNode.setPosition(300,-400,0),this.playerNode.getComponent(v).initPlayer(this.bossNode.getWorldPosition(),.1)}else console.error("playerPrefab is null")},o.createMoveControl=function(){if(null!=this.moveControlPrefab){var e=d(this.moveControlPrefab);e.parent=this.node,this.moveControlNode=e,this.moveControlNode.setPosition(0,-400,0)}else console.error("moveControlPrefab is null")},o.clearGameData=function(){var e,t,s,n,l;null!=(e=this.bossNode)&&e.isValid&&this.bossNode.destroy(),null!=(t=this.playerNode)&&t.isValid&&this.playerNode.destroy(),null!=(s=this.moveControlNode)&&s.isValid&&this.moveControlNode.destroy(),null!=(n=this._playerBulletLayer)&&n.isValid&&this._playerBulletLayer.destroy(),null!=(l=this._bossBulletLayer)&&l.isValid&&this._bossBulletLayer.destroy(),this.bossNode=null,this.playerNode=null,this.moveControlNode=null,this._playerBulletLayer=null,this._bossBulletLayer=null;var i=this.playerBulletNodes;if(i){for(var o,r=a(i);!(o=r()).done;){var u=o.value;null!=u&&u.isValid&&u.destroy()}i.length=0}var h=this.bossBulletNodes;if(h){for(var c,d=a(h);!(c=d()).done;){var g=c.value;null!=g&&g.isValid&&g.destroy()}h.length=0}},o.reloadGame=function(){console.log("reloadGame"),this.loadPrefabs(),this.clearGameData(),this.createMoveControl(),this.createBoss(),this.createPlayer(),this.refreshLevelText(),this._playBgm()},o._playBgm=function(){if(this._bgmSource){var e=this.bgmClip;!e&&y.Instance&&(e=y.Instance.getAsset("sound","bgm")),e&&(this._bgmSource.clip=e,this._bgmSource.loop=!0,this._bgmSource.volume=L.musicEnabled?1:0,this._bgmSource.play())}},o._playEffect=function(e,t){void 0===t&&(t=1),L.soundEnabled&&this._effectSource&&e&&this._effectSource.playOneShot(e,t)},o.playBulletFireEffect=function(){var e=this.bulletFireSound;!e&&y.Instance&&(e=y.Instance.getAsset("sound","bulletFire")),!e&&y.Instance&&(e=y.Instance.getAsset("sound","click")),this._playEffect(e,.5)},o.playPlayerDeathEffect=function(){var e=this.playerDeathSound;!e&&y.Instance&&(e=y.Instance.getAsset("sound","playerDeath")),!e&&y.Instance&&(e=y.Instance.getAsset("sound","gameLost")),this._playEffect(e)},o.playBossDeathEffect=function(){var e=this.bossDeathSound;!e&&y.Instance&&(e=y.Instance.getAsset("sound","bossDeath")),!e&&y.Instance&&(e=y.Instance.getAsset("sound","gameWin")),this._playEffect(e)},o.playBossHitEffect=function(){var e=this.bossHitSound;!e&&y.Instance&&(e=y.Instance.getAsset("sound","bossHit")),!e&&y.Instance&&(e=y.Instance.getAsset("sound","click")),this._playEffect(e)},o.playClickEffect=function(){var e=this.clickSound;!e&&y.Instance&&(e=y.Instance.getAsset("sound","click")),this._playEffect(e)},o.loadPrefabs=function(){null==this.bossPrefab&&(this.bossPrefab=y.Instance.getAsset("prefabs","boss")),null==this.playerPrefab&&(this.playerPrefab=y.Instance.getAsset("prefabs","player")),null==this.moveControlPrefab&&(this.moveControlPrefab=y.Instance.getAsset("prefabs","moveControl")),null==this.gameFailPrefab&&(this.gameFailPrefab=y.Instance.getAsset("prefabs","gameFail")),null==this.gameSettingPrefab&&(this.gameSettingPrefab=y.Instance.getAsset("prefabs","gameSetting")),null==this.gameSuceesPrefab&&(this.gameSuceesPrefab=y.Instance.getAsset("prefabs","gameSucees"))},i(t,[{key:"currentLevel",get:function(){return this._currentLevel}}]),t}(m)).Instance=null,j.isPaused=!1,D=t((w=j).prototype,"levelText",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(w.prototype,"jindu1",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(w.prototype,"bgmClip",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(w.prototype,"bulletFireSound",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(w.prototype,"playerDeathSound",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(w.prototype,"bossDeathSound",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(w.prototype,"bossHitSound",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(w.prototype,"clickSound",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=w))||M));o._RF.pop()}}}));

System.register("chunks:///_virtual/gameSetting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager.ts"],(function(e){var n,t,i,o,s,l,u,c,a,r,d,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,s=e.createClass},function(e){l=e.cclegacy,u=e._decorator,c=e.Node,a=e.sys,r=e.AudioSource,d=e.Component},function(e){p=e.gameManager}],execute:function(){var b,f,h,m,g,B,S,y,M,v,_,E,V,A;l._RF.push({},"c1d4diC6BFMR7J5x7hbJCwX","gameSetting",void 0);var I=u.ccclass,w=u.property,z="game_music_enabled",C="game_sound_enabled";e("gameSetting",(b=I("gameSetting"),f=w(c),h=w(c),m=w(c),g=w(c),B=w(c),b(((A=function(e){function n(){for(var n,t=arguments.length,s=new Array(t),l=0;l<t;l++)s[l]=arguments[l];return n=e.call.apply(e,[this].concat(s))||this,i(n,"musicSourceNode",M,o(n)),i(n,"closeMusicBtn",v,o(n)),i(n,"openMusicBtn",_,o(n)),i(n,"closeSoundBtn",E,o(n)),i(n,"openSoundBtn",V,o(n)),n}t(n,e);var l=n.prototype;return l.onLoad=function(){n._musicEnabled="0"!==a.localStorage.getItem(z),n._soundEnabled="0"!==a.localStorage.getItem(C),this.applyMusicVolume(),this.refreshMusicBtnVisible(),this.refreshSoundBtnVisible()},l.start=function(){},l.refreshMusicBtnVisible=function(){var e,t;null!=(e=this.closeMusicBtn)&&e.isValid&&(this.closeMusicBtn.active=n._musicEnabled),null!=(t=this.openMusicBtn)&&t.isValid&&(this.openMusicBtn.active=!n._musicEnabled)},l.refreshSoundBtnVisible=function(){var e,t;null!=(e=this.closeSoundBtn)&&e.isValid&&(this.closeSoundBtn.active=n._soundEnabled),null!=(t=this.openSoundBtn)&&t.isValid&&(this.openSoundBtn.active=!n._soundEnabled)},l.applyMusicVolume=function(){var e;if(null!=(e=this.musicSourceNode)&&e.isValid){var t=this.musicSourceNode.getComponent(r);t&&(t.volume=n._musicEnabled?1:0)}},l.saveAndApplyMusic=function(e){n._musicEnabled=e,a.localStorage.setItem(z,e?"1":"0"),this.applyMusicVolume()},l.saveAndApplySound=function(e){n._soundEnabled=e,a.localStorage.setItem(C,e?"1":"0")},l.onBtnClick=function(e,n){var t;null==(t=p.Instance)||t.playClickEffect(),"closeMusicBtn"===n?(this.saveAndApplyMusic(!1),this.refreshMusicBtnVisible(),console.log("关闭音乐")):"openMusicBtn"===n?(this.saveAndApplyMusic(!0),this.refreshMusicBtnVisible(),console.log("打开音乐")):"closeSoundBtn"===n?(this.saveAndApplySound(!1),this.refreshSoundBtnVisible(),console.log("关闭音效")):"openSoundBtn"===n?(this.saveAndApplySound(!0),this.refreshSoundBtnVisible(),console.log("打开音效")):"closeBtn"==n&&(p.Instance&&(p.Instance.setGamePaused(!1),p.Instance.clearSettingNode()),this.node.destroy())},s(n,null,[{key:"musicEnabled",get:function(){return n._musicEnabled}},{key:"soundEnabled",get:function(){return n._soundEnabled}}]),n}(d))._musicEnabled=!0,A._soundEnabled=!0,M=n((y=A).prototype,"musicSourceNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(y.prototype,"closeMusicBtn",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(y.prototype,"openMusicBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(y.prototype,"closeSoundBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(y.prototype,"openSoundBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=y))||S));l._RF.pop()}}}));

System.register("chunks:///_virtual/gameSucees.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resShiCi.ts","./gameManager.ts"],(function(e){var t,n,a,i,o,s,c,r,l,u,p,g,m,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,c=e.Node,r=e.Label,l=e.tween,u=e.Vec3,p=e.director,g=e.Component},function(e){m=e.default},function(e){f=e.gameManager}],execute:function(){var h,d,y,E,S;o._RF.push({},"6a4e2ARTAFG5Zn5Gfb/gcH+","gameSucees",void 0);var _=s.ccclass,v=s.property,b=e("GAME_SUCCESS_EVENT",{BACK_TO_LOBBY:"game-success-back-to-lobby",NEXT_LEVEL:"game-success-next-level",FAIL_RESETGAME:"game-fail-reset-game",FAIL_BACKHOME:"game-fail-back-home"});e("gameSucees",(h=_("gameSucees"),d=v(c),h((S=t((E=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,a(t,"passIcon",S,i(t)),t}n(t,e);var o=t.prototype;return o.start=function(){var e;null!=(e=this.passIcon)&&e.isValid&&this.playStampAnimation()},o.onEnable=function(){var e=m.getRandomShiCi();this.node.getChildByName("shici_text").getComponent(r).string=e,console.log(e)},o.playStampAnimation=function(){var e=this.passIcon;e.setScale(5,5,1),l(e).to(.28,{scale:new u(.92,.92,1)}).to(.18,{scale:new u(1.05,1.05,1)}).to(.14,{scale:new u(1,1,1)}).start()},o.onBtnClick=function(e,t){var n,a;if(null==(n=f.Instance)||n.playClickEffect(),"backHomeBtn"==t)this.node.destroy(),null==(a=p.getScene())||a.emit(b.BACK_TO_LOBBY);else if("nextLevel"==t){var i;this.node.destroy(),null==(i=p.getScene())||i.emit(b.NEXT_LEVEL)}},t}(g)).prototype,"passIcon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=E))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./boss.ts","./bossBullet.ts","./bullet.ts","./flameAnim.ts","./gameFail.ts","./gameLaunch.ts","./gameLoadingNode.ts","./gameLobbyNode.ts","./gameManager.ts","./gameSetting.ts","./gameSucees.ts","./moveControl.ts","./player.ts","./resMgr.ts","./resShiCi.ts","./tools.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/moveControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager.ts","./player.ts"],(function(t){var e,i,n,o,r,a,s,l,u,h,c,p,d,f,v,g,y,m,_,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,s=t._decorator,l=t.Node,u=t.Graphics,h=t.UITransform,c=t.input,p=t.Input,d=t.KeyCode,f=t.view,v=t.Vec3,g=t.Vec2,y=t.Component,m=t.Color},function(t){_=t.gameManager},function(t){P=t.player}],execute:function(){var T,w,D,x,C,N,b,L,W,M,S,O,z,R,A;a._RF.push({},"6aa24Lm4OpDlZZWQRPCC+/u","moveControl",void 0);var E=s.ccclass,K=s.property;t("moveControl",(T=E("moveControl"),w=K({type:l,tooltip:"线段起点，从层级管理器拖入节点"}),D=K({type:l,tooltip:"线段终点，从层级管理器拖入节点"}),x=K({type:l,tooltip:"沿直线移动的玩家节点（不填则从 gameManager 取）"}),C=K({tooltip:"沿直线移动速度（单位/秒）"}),N=K({tooltip:"线段颜色"}),b=K({tooltip:"线宽"}),T((M=e((W=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"pos1Node",M,o(e)),n(e,"pos2Node",S,o(e)),n(e,"playerNode",O,o(e)),n(e,"moveSpeed",z,o(e)),n(e,"lineColor",R,o(e)),n(e,"lineWidth",A,o(e)),e._graphics=null,e._uiTransform=null,e._moveDir=0,e}i(e,t);var a=e.prototype;return a.onLoad=function(){this._graphics=this.node.getComponent(u)||this.node.addComponent(u),this._uiTransform=this.node.getComponent(h),this.drawLine(),c.on(p.EventType.KEY_DOWN,this._onKeyDown,this),c.on(p.EventType.TOUCH_START,this._onTouchStart,this)},a.onDestroy=function(){c.off(p.EventType.KEY_DOWN,this._onKeyDown,this),c.off(p.EventType.TOUCH_START,this._onTouchStart,this)},a._isPlayerDead=function(){var t,e,i=null!=(t=this.playerNode)?t:null==(e=_.Instance)?void 0:e.playerNode,n=null==i?void 0:i.getComponent(P);return!0===(null==n?void 0:n.isDead)},a._onKeyDown=function(t){this._isPlayerDead()||(t.keyCode===d.KEY_A&&(this._moveDir=-1),t.keyCode===d.KEY_D&&(this._moveDir=1))},a._onTouchStart=function(t){if(!this._isPlayerDead()){var e=t.getLocation(),i=f.getVisibleSize().width/2;this._moveDir=e.x<i?-1:1}},a.getLocalPosFromNode=function(t,e){if(null==t||!t.isValid||!this._uiTransform)return null;var i=t.worldPosition,n=new v;return this._uiTransform.convertToNodeSpaceAR(i,n),e.x=n.x,e.y=n.y,e},a.getPos1=function(t){var e=t||new g;return this.getLocalPosFromNode(this.pos1Node,e)},a.getPos2=function(t){var e=t||new g;return this.getLocalPosFromNode(this.pos2Node,e)},a.drawLine=function(){if(this._graphics){var t=this.getPos1(),e=this.getPos2();t&&e&&(this._graphics.clear(),this._graphics.lineWidth=this.lineWidth,this._graphics.strokeColor=this.lineColor,this._graphics.moveTo(t.x,t.y),this._graphics.lineTo(e.x,e.y),this._graphics.stroke())}},a.getTFromWorldPosition=function(t){var e=this.getPos1(),i=this.getPos2();if(!e||!i||!this._uiTransform)return null;var n=new v;this._uiTransform.convertToNodeSpaceAR(t,n);var o=i.x-e.x,r=i.y-e.y,a=o*o+r*r;if(a<=0)return 0;var s=((n.x-e.x)*o+(n.y-e.y)*r)/a;return Math.max(0,Math.min(1,s))},a.getPointOnLineWorld=function(t,e){var i=this.getPointOnLine(t);if(!i||!this._uiTransform)return null;var n=e||new v;return this._uiTransform.convertToWorldSpaceAR(new v(i.x,i.y,0),n),n},a.getCenterWorld=function(t){var e=this.getPointOnLine(.5);if(!e||!this._uiTransform)return null;var i=t||new v;return this._uiTransform.convertToWorldSpaceAR(new v(e.x,e.y,0),i),i},a.getPointOnLine=function(t,e){var i=this.getPos1(),n=this.getPos2();if(!i||!n)return null;var o=e||new g;return t=Math.max(0,Math.min(1,t)),o.x=i.x+(n.x-i.x)*t,o.y=i.y+(n.y-i.y)*t,o},a.getPointsOnLine=function(t){for(var e=Math.max(2,t),i=[],n=0;n<e;n++){var o=this.getPointOnLine(n/(e-1));o&&i.push(o)}return i},a.getPointByDistance=function(t,e){var i=this.getPos1(),n=this.getPos2();if(!i||!n)return null;var o=n.x-i.x,r=n.y-i.y,a=Math.sqrt(o*o+r*r),s=a<=0?0:Math.max(0,Math.min(1,t/a));return this.getPointOnLine(s,e)},a.update=function(t){var e,i,n,o;if(!_.isPaused&&(null!=(e=this.pos1Node)&&e.isValid&&null!=(i=this.pos2Node)&&i.isValid&&this.drawLine(),!this._isPlayerDead())){var r=null!=(n=this.playerNode)?n:null==(o=_.Instance)?void 0:o.playerNode;if(null!=r&&r.isValid&&0!==this._moveDir){var a=this.length;if(!(a<=0)){var s=this.getTFromWorldPosition(r.worldPosition);if(null!=s){var l=this.moveSpeed*t/a,u=s;-1===this._moveDir&&(u-=l),1===this._moveDir&&(u+=l),u=Math.max(0,Math.min(1,u));var h=this.getPointOnLineWorld(u);h&&r.setWorldPosition(h)}}}}},r(e,[{key:"length",get:function(){var t=this.getPos1(),e=this.getPos2();return t&&e?g.distance(t,e):0}}]),e}(y)).prototype,"pos1Node",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(W.prototype,"pos2Node",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(W.prototype,"playerNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(W.prototype,"moveSpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),R=e(W.prototype,"lineColor",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new m(255,255,255,255)}}),A=e(W.prototype,"lineWidth",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),L=W))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resMgr.ts","./bullet.ts","./gameManager.ts"],(function(e){var t,i,l,r,n,a,s,o,u,h,d,c,p,f,y,b,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,l=e.initializerDefineProperty,r=e.assertThisInitialized,n=e.createClass},function(e){a=e.cclegacy,s=e._decorator,o=e.Node,u=e.SpriteFrame,h=e.Sprite,d=e.director,c=e.Vec3,p=e.instantiate,f=e.Component},function(e){y=e.resMgr},function(e){b=e.bullet},function(e){g=e.gameManager}],execute:function(){var v,_,m,F,P,S,I,D,B,w,A,N,k,z,V,C,M;a._RF.push({},"2fed6W+18VClL1mno1Gha+E","player",void 0);var T=s.ccclass,x=s.property;e("player",(v=T("player"),_=x(o),m=x({tooltip:"玩家血量，<=0 触发死亡"}),F=x(u),P=x(u),S=x({tooltip:"待机动画切换间隔（秒）"}),I=x({type:[u],tooltip:"死亡动画帧"}),D=x({tooltip:"死亡动画每帧时长（秒）"}),v((A=t((w=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,l(t,"bulletPosNode",A,r(t)),t.bulletPrefab=null,l(t,"hp",N,r(t)),l(t,"player_n1",k,r(t)),l(t,"player_n2",z,r(t)),l(t,"idleFrameInterval",V,r(t)),l(t,"deathFrames",C,r(t)),l(t,"deathFrameInterval",M,r(t)),t._idleSprite=null,t._idleFlip=!1,t._isDead=!1,t._bulletSpeed=600,t._bulletInterval=1,t}i(t,e);var a=t.prototype;return a.onLoad=function(){this._idleSprite=this.node.getComponent(h)||this.node.getComponentInChildren(h)},a.pauseAll=function(){d.getScheduler().pauseTarget(this),d.getScheduler().pauseTarget(this.node)},a.resumeAll=function(){d.getScheduler().resumeTarget(this.node),d.getScheduler().resumeTarget(this)},a.start=function(){this._idleSprite&&this.player_n1&&this.player_n2&&(this._idleSprite.spriteFrame=this.player_n1,this.schedule(this.tickIdleAnimation,this.idleFrameInterval,1/0))},a.update=function(e){this._isDead||g.isPaused||(this.faceBoss(),this.checkBossBulletHitPlayer())},a.faceBoss=function(){var e,t=g.Instance;if(null!=t&&null!=(e=t.bossNode)&&e.isValid){var i=this.node.worldPosition,l=new c;t.bossNode.getWorldPosition(l);var r=l.x-i.x,n=l.y-i.y;if(!(r*r+n*n<1e-6)){var a=Math.atan2(n,r)*(180/Math.PI)-90;this.node.eulerAngles=new c(0,0,a)}}},a.tickIdleAnimation=function(){!this._isDead&&this._idleSprite&&this.player_n1&&this.player_n2&&(this._idleFlip=!this._idleFlip,this._idleSprite.spriteFrame=this._idleFlip?this.player_n2:this.player_n1)},a.initPlayer=function(e,t,i){var l;void 0===t&&(t=.5),void 0===i&&(i=600),this._bulletInterval=t,this._bulletSpeed=i,this.bulletPrefab=null==(l=y.Instance)?void 0:l.getAsset("prefabs","bullet"),this.unschedule(this.createBullet),this.schedule(this.createBullet,this._bulletInterval,1/0)},a.stopFiring=function(){this.unschedule(this.createBullet)},a.createBullet=function(){var e,t;if(!this._isDead&&!g.isPaused){var i=g.Instance;if(null!=i&&null!=(e=i.bossNode)&&e.isValid&&this.bulletPrefab){var l=null!=(t=this.bulletPosNode)&&t.isValid?this.bulletPosNode:this.node,r=new c;l.getWorldPosition(r);var n=p(this.bulletPrefab);n.parent=i.getPlayerBulletLayer();var a,s=n.getComponent(b);if(s)s.setupTrackTarget(0,r,i.bossNode,this._bulletSpeed),i.playerBulletNodes.push(n),null==(a=g.Instance)||a.playBulletFireEffect();else n.destroy()}}},a.checkBossBulletHitPlayer=function(){if(!this._isDead){var e=g.Instance;if(e){var t=e.bossBulletNodes;if(null!=t&&Array.isArray(t)&&0!==t.length){for(var i=this.node.worldPosition,l=[],r=0;r<t.length;r++){var n=t[r];if(null!=n&&n.isValid){var a=n.worldPosition,s=a.x-i.x,o=a.y-i.y;s*s+o*o<=3600&&(l.push(n),this.takeDamage(1))}}for(var u=0,h=l;u<h.length;u++){var d=h[u],c=t.indexOf(d);c>=0&&t.splice(c,1),null!=d&&d.isValid&&d.destroy()}}}}},a.takeDamage=function(e){return void 0===e&&(e=1),!!this._isDead||(this.hp-=e,this.hp<=0&&(this.enterDeath(),!0))},a.enterDeath=function(){var e;this._isDead||(this._isDead=!0,null==(e=g.Instance)||e.playPlayerDeathEffect(),this.unschedule(this.createBullet),this.unschedule(this.tickIdleAnimation),this.playDeathFrameAnimation())},a.destroySelf=function(){var e,t=g.Instance;t&&(t.playerNode=null),t&&t.scheduleShowGameFail(1),null!=(e=this.node)&&e.isValid&&this.node.destroy(),console.log("player destroySelf")},a.playDeathFrameAnimation=function(){var e=this,t=this.deathFrames,i=null!=t&&Array.isArray(t)?t.slice(0):[],l=i.length;if(0!==l){var r=0;!function t(){if(e.isValid&&e._idleSprite)if(r>=l)e.destroySelf();else{var n=i[r];n&&(e._idleSprite.spriteFrame=n),r++,e.scheduleOnce((function(){return t()}),e.deathFrameInterval)}}()}else this.destroySelf()},n(t,[{key:"isDead",get:function(){return this._isDead}}]),t}(f)).prototype,"bulletPosNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(w.prototype,"hp",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),k=t(w.prototype,"player_n1",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(w.prototype,"player_n2",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(w.prototype,"idleFrameInterval",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),C=t(w.prototype,"deathFrames",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=t(w.prototype,"deathFrameInterval",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.08}}),B=w))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/resMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var o,s,t,e,r;return{setters:[function(n){o=n.inheritsLoose},function(n){s=n.cclegacy,t=n._decorator,e=n.assetManager,r=n.Component}],execute:function(){var l,a;s._RF.push({},"6082errvTVL+7V/HypgPAlW","resMgr",void 0);var u=t.ccclass;t.property,n("resMgr",u("resMgr")(((a=function(n){function s(){for(var o,s=arguments.length,t=new Array(s),e=0;e<s;e++)t[e]=arguments[e];return(o=n.call.apply(n,[this].concat(t))||this).totalAb=0,o.nowAb=0,o.total=0,o.now=0,o.abBounds={},o.progressFunc=null,o.endFunc=null,o}o(s,n);var t=s.prototype;return t.onLoad=function(){null===s.Instance?(console.log("初始化resMgr单列!"),s.Instance=this):this.destroy()},t.loadRes=function(n,o,s){var t=this;n.load(o,s,(function(n,s){t.now++,n?console.log("load res = "+o+"--失败:"+n):console.log("load res  = "+o+"--成功"),t.progressFunc&&t.progressFunc(t.now,t.total),t.now>=t.total&&null!=t.endFunc&&t.endFunc()}))},t.loadAssetsInAssetsBundle=function(n){for(var o in n){var s=n[o].urls,t=n[o].assetType;if(s&&Array.isArray(s))for(var e=0;e<s.length;e++)this.loadRes(this.abBounds[o],s[e],t)}},t.loadAssetsBundle=function(n,o){var s=this;e.loadBundle(n,(function(t,e){null!=t?(console.log("Bundle--load 失败:"+n),s.abBounds[n]=null):(console.log("Bundle--load 成功:"+n),s.abBounds[n]=e),o&&o()}))},t.preLoadResPkg=function(n,o,s){var t=this;for(var e in this.totalAb=0,this.nowAb=0,this.total=0,this.now=0,this.progressFunc=o,this.endFunc=s,n){this.totalAb++;var r=n[e].urls;this.total+=r&&Array.isArray(r)?r.length:0}for(var e in n)this.loadAssetsBundle(e,(function(){t.nowAb++,t.nowAb===t.totalAb&&t.loadAssetsInAssetsBundle(n)}))},t.unLoadResPkg=function(){},t.preLoadRes=function(n,o,s,t){},t.getAsset=function(n,o){var s=e.getBundle(n);return null==s?(console.log("err:"+n+"ab包加载失败"),null):s.get(o)},s}(r)).Instance=null,l=a))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/resShiCi.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){var i;t._RF.push({},"071fcUfAfdKqbbDownLrtHL","resShiCi",void 0),n("default",function(){function n(){}return n.getRandomShiCi=function(){var t=Math.floor(Math.random()*Object.keys(n.shiCi).length)+1;return n.shiCi[t]},n}()).shiCi=((i={})[1]="（唐）孟浩然\n春眠不觉晓，处处闻啼鸟。\n夜来风雨声，花落知多少？",i[2]="（唐）王之焕\n白日依山尽，黄河入海流。\n欲穷千里目，更上一层楼。",i[3]="（唐）柳宗元\n千山鸟飞绝，万径人踪灭。\n孤舟蓑笠翁，独钓寒江雪。",i[4]="（唐）贾岛\n松下问童子，言师采药去。\n只在此山中，云深不知处。",i[5]="（唐）李商隐\n向晚意不适，驱车登古原。\n夕阳无限好，只是近黄昏。",i[6]="（宋）李清照\n生当作人杰，死亦为鬼雄。\n至今思项羽，不肯过江东。",i[7]="（宋）林升\n山外青山楼外楼，西湖歌舞几时休？\n暖风熏得游人醉，直把杭州作汴州。",i[8]="（宋）苏轼\n水光潋滟晴方好，山色空蒙雨亦奇。\n欲把西湖比西子，淡妆浓抹总相宜。",i[9]="（宋）辛弃疾\n青山遮不住，毕竟东流去。\n江晚正愁余，山深闻鹧鸪。",i[10]="（宋）陆游\n山重水复疑无路，柳暗花明又一村。\n黄四娘家花满蹊，千朵万朵压枝低。",i[11]="（宋）杨万里\n小荷才露尖尖角，早有蜻蜓立上头。\n接天莲叶无穷碧，映日荷花别样红。",i[12]="（宋）范成大\n梅子金黄杏子肥，麦花雪白菜花稀。\n日长篱落无人过，唯有蜻蜓蛱蝶飞。",i[13]="（宋）王安石\n爆竹声中一岁除，春风送暖入屠苏。\n千门万户瞳瞳日，总把新桃换旧符。",i[14]="（宋）王安石\n春宵一刻值千金，花有清香月有阴。\n歌管楼台声细细，秋千院落夜沉沉。",i[15]="（宋）欧阳修\n去年元夜时，花市灯如昼。\n月上柳梢头，人约黄昏后。",i[16]="（宋）辛弃疾\n众里寻他千百度，蓦然回首，那人却在，灯火阑珊处。",i[17]="（宋）苏轼\n明月几时有，把酒问青天。\n不知天上宫阙，今夕是何年。",i[19]="（宋）苏轼\n人有悲欢离合，月有阴晴圆缺，此事古难全。\n但愿人长久，千里共婵娟。",i[21]="（唐）王之焕\n黄河远上白云间，一片孤城万仞山。\n羌笛何须怨杨柳，春风不度玉门关。",i[22]="（唐）王翰\n葡萄美酒夜光杯，欲饮琵琶马上催。\n醉卧沙场君莫笑，古来征战几人回？",i[23]="（唐）王昌龄\n秦时明月汉时关，万里长征人未还。\n但使龙城飞将在，不教胡马度阴山！",i[24]="（唐）李白\n日照香炉生紫烟，遥看瀑布挂前川。\n飞流直下三千尺，疑是银河落九天。",i[25]="（唐）李白\n故人西辞黄鹤楼，烟花三月下扬州。\n孤帆远影碧空尽，惟见长江天际流。",i[26]="（唐）李白\n天门中断楚江开，碧水东流至此回。\n两岸青山相对出，孤帆一片日边来。",i[27]="（唐）李白\n朝辞白帝彩云间，千里江陵一日还。\n两岸猿声啼不住，轻舟已过万重山。",i[28]="（唐）杜甫\n两个黄鹂鸣翠柳，一行白鹭上青天。\n窗含西岭千秋雪，门泊东吴万里船。",i[29]="（唐）杜甫\n国破山河在，城春草木深。\n感时花溅泪，恨别鸟惊心。",i[30]="（唐）杜甫\n烽火连三月，家书抵万金。\n白头搔更短，浑欲不胜簪。",i[31]="（唐）杜甫\n迟日江山丽，春风花草香。\n泥融飞燕子，沙暖睡鸳鸯。",i[32]="（唐）杜甫\n江碧鸟逾白，山青花欲燃。\n今春看又过，何日是归年？",i),t._RF.pop()}}}));

System.register("chunks:///_virtual/tools.ts",["cc","./resMgr.ts"],(function(e){var s,n,t,o;return{setters:[function(e){s=e.cclegacy,n=e.Prefab,t=e.AudioClip},function(e){o=e.resMgr}],execute:function(){s._RF.push({},"2b099bbqDlP8agPSddEZo7R","tools",void 0);var a=e("SOUND",function(e){return e[e.start_sound=0]="start_sound",e[e.click_sound=1]="click_sound",e[e.gameLost_sound=2]="gameLost_sound",e[e.gameWin_sound=3]="gameWin_sound",e[e.sendCard_sound=4]="sendCard_sound",e[e.time_sound=5]="time_sound",e[e.clear_sound=6]="clear_sound",e[e.back_sound=7]="back_sound",e}({}));e("default",function(){function e(){}return e.savaData=function(){},e.getData=function(){},e.getRandomInt=function(e,s){return Math.floor(Math.random()*(s-e+1))+e},e.getRandomMjIndex=function(){return e.getRandomInt(1,34)},e.playSound=function(e){if(e==a.start_sound)o.Instance.getAsset("sound","gameStart");else if(e==a.click_sound)o.Instance.getAsset("sound","click");else if(e==a.gameLost_sound)o.Instance.getAsset("sound","gameLost");else if(e==a.gameWin_sound)o.Instance.getAsset("sound","gameWin");else if(e==a.sendCard_sound)o.Instance.getAsset("sound","sendCard");else if(e==a.time_sound)o.Instance.getAsset("sound","time");else if(e==a.clear_sound)o.Instance.getAsset("sound","clear");else if(e==a.back_sound)o.Instance.getAsset("sound","back")},e}()).resPkg={prefabs:{assetType:n,urls:["gameLobbyNode","gameManager","bullet","boss","player","bossBullet","moveControl","gameSetting","gameSucees","gameFail"]},sound:{assetType:t,urls:[]}},s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});